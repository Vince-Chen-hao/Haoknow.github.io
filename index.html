<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 1 頁 | Vince Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="Vince Blog">
<meta property="og:url" content="https://vince-chen-hao.github.io/KnowHao/index.html">
<meta property="og:site_name" content="Vince Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Vince">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Vince Blog" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  
<link rel="stylesheet" href="css/style.css">


  
<script src="js/jquery-3.1.1.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

<meta name="generator" content="Hexo 4.2.0"></head>



  <body>


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Vince Blog" rel="home"> Vince Blog </a>
            
          </h1>
          
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="index.html">首頁</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="archives">彙整</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="categories">分類</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="tags">標籤</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="about">關于</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-hello-world"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/05/13/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/05/13/hello-world/" class="article-date">
	  <time datetime="2020-05-12T16:00:00.000Z" itemprop="datePublished">五月 13, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E5%89%8D%E7%AB%AF%E6%96%87/" rel="tag">前端文</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/%E6%95%99%E5%AD%B8%E6%96%87/" rel="tag">教學文</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0513"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/05/12/0513/">JS- scope chain</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/05/12/0513/" class="article-date">
	  <time datetime="2020-05-11T16:00:00.000Z" itemprop="datePublished">五月 12, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="外部環境參照"><a href="#外部環境參照" class="headerlink" title="外部環境參照"></a>外部環境參照</h2><p><img src="/images/test.png" alt=""></p>
<pre><code class="bash"></code></pre>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0315"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/03/15/0315/">Vue_過濾API資料(實作)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/03/15/0315/" class="article-date">
	  <time datetime="2020-03-14T16:00:00.000Z" itemprop="datePublished">三月 15, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="＊過濾目標"><a href="#＊過濾目標" class="headerlink" title="＊過濾目標"></a>＊過濾目標</h3><p>使用者經由選擇器篩選縣市後(如下圖)，跳出選定縣市的藥局資料。<br><img src="/images/select.png" alt=""></p>
<p>第一步是先將raw data分類出select可以導入的縣市資料庫後，接下來就是進行基本的判定式(if/else)再利用陣列語法(filter)匯入顯示頁面。韓式內容大致是新增一變數，如選擇區域欄位是空的，就回傳與city相同的值，如選擇區域是有資料的，那就回傳與區域相同的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const pharmacies = this.data.filter(pharmacy =&gt; &#123;</span><br><span class="line">    //data裡的area如沒有資訊，則找出與data裡的city相同的縣市</span><br><span class="line">    <span class="keyword">if</span> (!this.select.area) &#123;</span><br><span class="line">      <span class="built_in">return</span> pharmacy.properties.county === this.select.city;</span><br><span class="line">    &#125;</span><br><span class="line">    //顯示data裡area區域的資料</span><br><span class="line">    <span class="built_in">return</span> pharmacy.properties.town === this.select.area;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<hr>

<h3 id="＊統整API資料處理的流程"><a href="#＊統整API資料處理的流程" class="headerlink" title="＊統整API資料處理的流程"></a>＊統整API資料處理的流程</h3><p>以實作過兩個作品的經驗來看，把API取得顯示的過程分為四個步驟，串接、分離、核對、顯示，</p>
<ol>
<li><p>串接：javascript有三種方法，請參考API串接語法文章，另外也能使用Vue語法做串接</p>
</li>
<li><p>分離：一般來說，取得的資料量都非常巨大，勢必是要經過拆解，提供選擇項目以供使用者進行篩選，這時碼就必須先動動腦，什麼資料要在頁面可做篩選，決定後再與select選項欄做串連，就實作經驗而言，可以直接在raw data上做一步步的拆解，如：取得唯一值，又或者直接導入外部資料來源，取得select欄位的顯示資料，可參考select串接就能在畫面上篩選資料，並將資料串連至vue的data變數上</p>
</li>
<li><p>核對：這邊就能使用陣列語法(filter、forEach、map)等等去刪選並核對顯示的資料內容，此時就能將整理過的資料傳送到data指定變數上</p>
</li>
<li><p>顯示：經由v-for迴圈，將資料回傳至畫面，除了直接回傳外，有時也會有特別需另外判定的資料，又或者經由Map串接的資料，這都須配合不同的規則去做調整</p>
</li>
</ol>
<hr>


<h3 id="＊Vue資料過濾流程-Computed-amp-Methods"><a href="#＊Vue資料過濾流程-Computed-amp-Methods" class="headerlink" title="＊Vue資料過濾流程(Computed &amp; Methods)"></a>＊Vue資料過濾流程(Computed &amp; Methods)</h3><h5 id="選單分類（通常使用Computed）"><a href="#選單分類（通常使用Computed）" class="headerlink" title="選單分類（通常使用Computed）"></a>選單分類（通常使用Computed）</h5><ul>
<li>選項綁定：新增一組字串變數，承接v-model選項的值</li>
<li>資料呈現：是用computed的函式名稱(可當變數)</li>
<li>函式內容：執行filter（代入變數值判定）後回傳給computed函式</li>
<li>執行過程：在頁面選擇項目後(更動變數值)，自動執行filter並回傳</li>
</ul>
<h5 id="列表分類（Methods）"><a href="#列表分類（Methods）" class="headerlink" title="列表分類（Methods）"></a>列表分類（Methods）</h5><ul>
<li>選項綁定：使用點擊函式，代參數放產品分類名稱</li>
<li>資料呈現：新增一組新陣列放過濾後資料</li>
<li>函式內容：執行filter（代入參數值判定）後回傳給新陣列</li>
<li>執行過程：當點擊函式，將參數載入filter公式，回傳至變數在頁面顯示</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Vue/" rel="tag">Vue</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0313"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/03/13/0313/">Vue_ 口罩地圖(實作)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/03/13/0313/" class="article-date">
	  <time datetime="2020-03-12T16:00:00.000Z" itemprop="datePublished">三月 13, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="執行共分為四步驟"><a href="#執行共分為四步驟" class="headerlink" title="執行共分為四步驟"></a>執行共分為四步驟</h4><ul>
<li>取得</li>
<li>篩選</li>
<li>配對</li>
<li>顯示</li>
</ul>
<ol>
<li>取得API資料後（mounted）放置data變數裡，並使用leaflet語法串接地圖</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">mounted</span></span>() &#123;</span><br><span class="line">    const url =</span><br><span class="line">      <span class="string">"https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json"</span>;</span><br><span class="line">    this.<span class="variable">$http</span>.get(url).<span class="keyword">then</span>(response =&gt; &#123;</span><br><span class="line">      this.data = response.data.features;</span><br><span class="line">      console.log(<span class="string">"&lt;data&gt;"</span>+JSON.stringify(this.data));</span><br><span class="line">      this.updateMarker(); //取得資料後執行更新</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    osmap = L.map(<span class="string">"map"</span>, &#123;</span><br><span class="line">      center: [25.03, 121.55],</span><br><span class="line">      zoom: 16</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    L.tileLayer(<span class="string">"https://&#123;s&#125;.tile.openstreetmap.org/&#123;z&#125;/&#123;x&#125;/&#123;y&#125;.png?&#123;foo&#125;"</span>, &#123;</span><br><span class="line">      foo: <span class="string">"bar"</span>,</span><br><span class="line">      attribution:</span><br><span class="line">        <span class="string">'Map data &amp;copy; &lt;a href="https://www.openstreetmap.org/"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href="https://creativecommons.org/licenses/by-sa/2.0/"&gt;CC-BY-SA&lt;/a&gt;'</span>,</span><br><span class="line">      maxZoom: 18</span><br><span class="line">    &#125;).addTo(osmap);</span><br><span class="line"></span><br><span class="line">    L.marker([25.03, 121.55]).addTo(osmap);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>載入台灣城市JSON檔案，匯出Select選擇欄(縣市＋區域)</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;div class=<span class="string">"search-bar p-2"</span>&gt;</span><br><span class="line">  &lt;div class=<span class="string">"form-group d-flex"</span>&gt;</span><br><span class="line">    &lt;label <span class="keyword">for</span>=<span class="string">"city"</span> class=<span class="string">"mr-2 col-form-label"</span>&gt;縣市&lt;/label&gt;</span><br><span class="line">    &lt;div class=<span class="string">"flex-fill"</span>&gt;</span><br><span class="line">      &lt;select class=<span class="string">"form-control"</span></span><br><span class="line">        id=<span class="string">"city"</span></span><br><span class="line">        v-model=<span class="string">"select.city"</span></span><br><span class="line">        @change=<span class="string">"select.area = ''"</span></span><br><span class="line">      &gt;</span><br><span class="line">      &lt;!-- 當選擇其他選項時，就會觸發change裡的指令 --&gt;</span><br><span class="line">        &lt;option value&gt;-- 請選擇縣市 --&lt;/option&gt;</span><br><span class="line">        &lt;option</span><br><span class="line">          v-for=<span class="string">"item in cityName"</span></span><br><span class="line">          :value=<span class="string">"item.CityName"</span></span><br><span class="line">          :key=<span class="string">"item.CityName"</span></span><br><span class="line">        &gt;&#123;&#123; item.CityName &#125;&#125;&lt;/option&gt;</span><br><span class="line">      &lt;/select&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=<span class="string">"form-group d-flex"</span>&gt;</span><br><span class="line">&lt;label <span class="keyword">for</span>=<span class="string">"area"</span> class=<span class="string">"mr-2 col-form-label"</span>&gt;地區&lt;/label&gt;</span><br><span class="line">&lt;div class=<span class="string">"flex-fill"</span>&gt;</span><br><span class="line">  &lt;select class=<span class="string">"form-control"</span></span><br><span class="line">    id=<span class="string">"area"</span></span><br><span class="line">    v-if=<span class="string">"select.city.length"</span></span><br><span class="line">    v-model=<span class="string">"select.area"</span></span><br><span class="line">    @change=<span class="string">"updateSelect"</span> </span><br><span class="line">  &gt;</span><br><span class="line">    &lt;option value&gt;-- 請選擇地區 --&lt;/option&gt;</span><br><span class="line">    &lt;option</span><br><span class="line">      :value=<span class="string">"area.AreaName"</span></span><br><span class="line">      v-for=<span class="string">"area in cityName.find((city) =&gt; city.CityName === select.city).AreaList"</span></span><br><span class="line">      :key=<span class="string">"area.AreaName"</span></span><br><span class="line">    &gt;&#123;&#123; area.AreaName &#125;&#125;&lt;/option&gt;</span><br><span class="line">  &lt;/select&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>執行filter將Select選擇的區域做配對，媒合後顯示資料</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="function"><span class="title">updateMarker</span></span>() &#123;</span><br><span class="line">    //取出區域</span><br><span class="line">    const pharmacies = this.data.filter(pharmacy =&gt; &#123;</span><br><span class="line">      //如果data裡的area沒有資訊，則找出與data裡的city相同的縣市</span><br><span class="line">      <span class="keyword">if</span> (!this.select.area) &#123;</span><br><span class="line">        <span class="built_in">return</span> pharmacy.properties.county === this.select.city;</span><br><span class="line">      &#125;</span><br><span class="line">      //找出與data裡的area相同的區域</span><br><span class="line">      <span class="built_in">return</span> pharmacy.properties.town === this.select.area;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>緊接著利用forEach匯入地圖座標、顯示藥局資訊等功能</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//利用forEach執行動作，取得座標＋顯示內容</span><br><span class="line">pharmacies.forEach(pharmacy =&gt; &#123;</span><br><span class="line">const &#123; properties, geometry &#125; = pharmacy;</span><br><span class="line">const icon = properties.mask_adult || properties.mask_child ? icons.orange : icons.grey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">L.marker([</span><br><span class="line">  geometry.coordinates[1],geometry.coordinates[0],properties],&#123;icon&#125;)</span><br><span class="line">  .addTo(osmap).bindPopup(`&lt;h5&gt;<span class="variable">$&#123;properties.name&#125;</span>&lt;/h5&gt;</span><br><span class="line">    電話： <span class="variable">$&#123;properties.phone&#125;</span>&lt;br&gt;</span><br><span class="line">    地址：&lt;a href=<span class="string">"https://www.google.com.tw/maps/place/<span class="variable">$&#123;properties.address&#125;</span>"</span> target=<span class="string">"_blank"</span>&gt;<span class="variable">$&#123;properties.address&#125;</span>&lt;/a&gt;&lt;br&gt; </span><br><span class="line">    &lt;small&gt;資料更新時間：<span class="variable">$&#123;properties.updated&#125;</span>&lt;/small&gt; </span><br><span class="line">    &lt;p&gt;備註： <span class="variable">$&#123;properties.note&#125;</span>&lt;/p&gt;</span><br><span class="line">    &lt;hr&gt;  </span><br><span class="line">    &lt;mark&gt;口罩數量：&lt;b&gt;成人&lt;ins&gt; </span><br><span class="line">    <span class="variable">$&#123;properties.mask_adult&#125;</span> &lt;/ins&gt;個 / 兒童 &lt;ins&gt; <span class="variable">$&#123;properties.mask_child&#125;</span>&lt;/ins&gt; 個 </span><br><span class="line">    &lt;/b&gt;&lt;/mark&gt;&lt;br&gt;</span><br><span class="line">    `);</span><br><span class="line">&#125;);</span><br><span class="line">//上面執行的forEach是顯示初步取得（select選項）的地圖資訊，而非點擊後的</span><br><span class="line"></span><br><span class="line">this.penTo(pharmacies[0]); //回傳入第一個藥局進入penTo下方的語法</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>最後一步是將取得資料顯示在頁面上，使用迴圈，並經由v-if判定是否符合縣市與區域的資料，顯示結果就會是select裡選擇的區域資料。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;ul class=<span class="string">"list-group text-dark"</span>&gt;</span><br><span class="line">&lt;template v-for=<span class="string">"(item, key) in data"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- v-if符合條件才顯示 --&gt;</span><br><span class="line">  &lt;a class=<span class="string">"list-group-item"</span></span><br><span class="line">    :key=<span class="string">"key"</span> </span><br><span class="line">    v-if=<span class="string">"item.properties.county === select.city &amp;&amp; item.properties.town === select.area"</span></span><br><span class="line">    :class=<span class="string">"&#123; 'mask-highlight': !item.properties.mask_adult &amp;&amp; !item.properties.mask_child&#125;"</span></span><br><span class="line">    @click=<span class="string">"penTo(item)"</span></span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div class=<span class="string">"d-flex align-items-baseline"</span>&gt;</span><br><span class="line">      &lt;i class=<span class="string">"fas fa-hospital-symbol mr-1"</span> style=<span class="string">"font-size:18px;color:orange"</span>&gt;&lt;/i&gt;</span><br><span class="line">      &lt;div class=<span class="string">"info_title"</span>&gt;&#123;&#123; item.properties.name &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=<span class="string">"info_address"</span>&gt;</span><br><span class="line">      &lt;p class=<span class="string">"mb-0"</span>&gt;</span><br><span class="line">        地址：</span><br><span class="line">        &lt;a :href=<span class="string">"`https://www.google.com.tw/maps/place/<span class="variable">$&#123;item.properties.address&#125;</span>`"</span></span><br><span class="line">          title=<span class="string">"Google Map"</span></span><br><span class="line">        &gt;&#123;&#123; item.properties.address &#125;&#125;&lt;/a&gt;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h4 id="leaflet地圖工具"><a href="#leaflet地圖工具" class="headerlink" title="leaflet地圖工具"></a>leaflet地圖工具</h4><p>Leaflet 是一套適用於各種平台的 JavaScript 地圖繪製工具，可以呈現類似 Google 地圖的效果。要在網頁上呈現地圖，除了大多數人所熟知的 Google 地圖之外，Leaflet 也是一套很不錯的工具，它是一套開放原始碼的輕量級 JavaScript 網頁地圖函式庫，其所呈現的效果與 Google 地圖非常相似，主要的特色是使用簡單、速度快，並且跨平台，許多知名網站（如 GitHub 與 Flickr 等）都是使用 Leaflet 來呈現地圖。</p>
<h4 id="實用功能"><a href="#實用功能" class="headerlink" title="實用功能"></a>實用功能</h4><h5 id="layerremove-切換區域時移除舊的指標"><a href="#layerremove-切換區域時移除舊的指標" class="headerlink" title="layerremove: 切換區域時移除舊的指標"></a>layerremove: 切換區域時移除舊的指標</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 當select切換區域時(@change))，就會觸發移除指標</span><br><span class="line">  <span class="function"><span class="title">updateSelect</span></span>() &#123;</span><br><span class="line">    osmap.eachLayer(layer =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (layer instanceof L.Marker) &#123;</span><br><span class="line">        osmap.removeLayer(layer);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    this.updateMarker();</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h5 id="panTo：點擊後會移動至指定位置並聚焦放大"><a href="#panTo：點擊後會移動至指定位置並聚焦放大" class="headerlink" title="panTo：點擊後會移動至指定位置並聚焦放大"></a>panTo：點擊後會移動至指定位置並聚焦放大</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">penTo(item) &#123;</span><br><span class="line">  const &#123; properties, geometry &#125; = item;</span><br><span class="line">  const icon = properties.mask_adult || properties.mask_child ? icons.orange : icons.grey;</span><br><span class="line"></span><br><span class="line">  //panTo的功用是點擊後會移動至指定位置並聚焦放大</span><br><span class="line">  osmap.panTo([</span><br><span class="line">    geometry.coordinates[1],</span><br><span class="line">    geometry.coordinates[0],</span><br><span class="line">    properties</span><br><span class="line">  ]);</span><br></pre></td></tr></table></figure>

<h5 id="openPopup-自動彈跳藥局的“資訊文字”"><a href="#openPopup-自動彈跳藥局的“資訊文字”" class="headerlink" title="openPopup:自動彈跳藥局的“資訊文字”"></a>openPopup:自動彈跳藥局的“資訊文字”</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  L.marker([geometry.coordinates[1], geometry.coordinates[0]],&#123;icon&#125;)</span><br><span class="line">    .addTo(osmap).bindPopup(</span><br><span class="line">      `&lt;h5&gt;<span class="variable">$&#123;properties.name&#125;</span>&lt;/h5&gt;</span><br><span class="line">        電話：<span class="variable">$&#123;properties.phone&#125;</span>&lt;br&gt;</span><br><span class="line">        地址： &lt;a href=<span class="string">"https://www.google.com.tw/maps/place/<span class="variable">$&#123;properties.address&#125;</span>"</span> target=<span class="string">"_blank"</span>&gt;<span class="variable">$&#123;properties.address&#125;</span>&lt;/a&gt;&lt;br&gt; </span><br><span class="line">        &lt;small&gt;資料更新時間：<span class="variable">$&#123;properties.updated&#125;</span>&lt;/small&gt; </span><br><span class="line">        &lt;p&gt;備註：<span class="variable">$&#123;properties.note&#125;</span>&lt;/p&gt;</span><br><span class="line">        &lt;hr&gt;  </span><br><span class="line">        &lt;mark&gt;口罩數量：&lt;b&gt;成人有&lt;ins&gt; </span><br><span class="line">        <span class="variable">$&#123;properties.mask_adult&#125;</span> &lt;/ins&gt;個 / 兒童有 &lt;ins&gt; <span class="variable">$&#123;properties.mask_child&#125;</span>&lt;/ins&gt; 個 </span><br><span class="line">        &lt;/b&gt;&lt;/mark&gt;&lt;br&gt;</span><br><span class="line">        `</span><br><span class="line">    )</span><br><span class="line">    .openPopup(); </span><br><span class="line">    //彈跳鼠標藥局的“資訊文字”</span><br><span class="line">    //這裡會顯示聚焦後(點擊後會放大)的資訊</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="實作成品"><a href="#實作成品" class="headerlink" title="實作成品"></a>實作成品</h4><p>作品: <a href="https://vince-chen-hao.github.io/Vue_MaskMap/">口罩搜尋地圖</a></p>
<p><img src="/images/maskmap.png" alt=""></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Vue/" rel="tag">Vue</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0310"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/03/10/0310/">jQuery_事件(Events)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/03/10/0310/" class="article-date">
	  <time datetime="2020-03-09T16:00:00.000Z" itemprop="datePublished">三月 10, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="觸發事件函式"><a href="#觸發事件函式" class="headerlink" title="觸發事件函式"></a>觸發事件函式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'選擇器'</span>).on(<span class="string">'事件類型'</span>, <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    任意處理程序</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>$()函式的功能是將HTML元素轉換為jQuery特殊元素，經此方法轉換後的HTML元素稱為「jQuery物件」</li>
<li>on()是設定「當某事件發生時，執行某指令」的方法。</li>
</ul>
<ol>
<li>第一個參數是「事件類型(Event Type)」：事件觸發的條件</li>
<li>第二個參數是「處理程序(Event Handler)」：事件被觸發後，接著要调用的方法。</li>
</ol>
<h5 id="範例1-更改css色系"><a href="#範例1-更改css色系" class="headerlink" title="範例1(更改css色系)"></a>範例1(更改css色系)</h5><p>當滑鼠移入#typo，接著會執行：透過css樣式修改#typo的顏色</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'選擇器'</span>).css(<span class="string">'屬性'</span>,<span class="string">'值'</span>);</span><br></pre></td></tr></table></figure>
<p>css()中所定義的指令是「jQuery方法」，意即「jQuery其js中定義了的css()這個函式」</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable">$function</span>()&#123;</span><br><span class="line">    $(<span class="string">'#typo'</span>).on(<span class="string">'mouseover'</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        $(<span class="string">'#typo'</span>).css(<span class="string">'color'</span>,<span class="string">'#ebc000'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    $(<span class="string">'#typo'</span>).css(<span class="string">'color'</span>,<span class="string">'#556A5B'</span>);</span><br><span class="line">    $(<span class="string">'#typo'</span>).css(<span class="string">'transform'</span>,<span class="string">'rotate(10deg)'</span>)</span><br><span class="line">    $(<span class="string">'#typo .inner'</span>).css(<span class="string">'opacity'</span>,0.5)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="多個處理程序"><a href="#多個處理程序" class="headerlink" title="多個處理程序"></a>多個處理程序</h4><p>在.on()方法中的第一個參數「事件類型」被觸發之後，第二個參數「處理程序函式」中可以執行數個個別處理的程序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$(<span class="string">'選擇器'</span>).on(<span class="string">'事件類型'</span>, <span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    處理1;</span><br><span class="line">    處理2;</span><br><span class="line">    處理3...;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="範例2"><a href="#範例2" class="headerlink" title="範例2"></a>範例2</h5><p>當滑鼠移入#typo，接著會修改#typo的顏色，透過css樣式修改header的背景顏色</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable">$function</span>()&#123;</span><br><span class="line">    $(<span class="string">'#typo'</span>).on(<span class="string">'mouseover'</span>,<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">        $(<span class="string">'#typo'</span>).css(<span class="string">'color'</span>,<span class="string">'#ebc000'</span>) ;</span><br><span class="line">        $(<span class="string">'header'</span>).css(<span class="string">'background-color'</span>,<span class="string">'#ffffff'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="主要的事件類型"><a href="#主要的事件類型" class="headerlink" title="主要的事件類型"></a>主要的事件類型</h4><p><img src="https://i.imgur.com/q7B1WBC.png" alt=""></p>
<p>jQuery中，大部分的操作都基於HTML DOM，所以必須確定頁面文件已經完全下載好，才能開始執行程式。</p>
<p>當DOM載入後，可執行ready()方法，或者直接寫function()。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$(document).ready(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    // 這裡放你要執行的程式碼</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//or</span><br><span class="line"></span><br><span class="line"><span class="variable">$function</span>()&#123;</span><br><span class="line">    // 這裡放你要執行的程式碼</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="統整Jquery動畫效果"><a href="#統整Jquery動畫效果" class="headerlink" title="統整Jquery動畫效果"></a>統整Jquery動畫效果</h3><h5 id="slide滑動系列"><a href="#slide滑動系列" class="headerlink" title="slide滑動系列"></a>slide滑動系列</h5><ul>
<li>slideUp : 關閉</li>
<li>slideDown ：開啟</li>
<li>slideToggle ：開關</li>
<li>slideToggle（2000）:兩秒呈現</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    $(<span class="string">'.button'</span>).click(<span class="keyword">function</span>(event)&#123;</span><br><span class="line">        $(<span class="string">'.text'</span>).slideToggle(2000);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="fade淡出效果"><a href="#fade淡出效果" class="headerlink" title="fade淡出效果"></a>fade淡出效果</h5><ul>
<li>fadeOut : 關閉</li>
<li>fadeIn ：開啟</li>
<li>fadeToggle ：開關</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    $(<span class="string">'.button'</span>).click(<span class="keyword">function</span>(event)&#123;</span><br><span class="line">        $(<span class="string">'.text'</span>).fadeToggle();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="鏈式複合式動畫效果"><a href="#鏈式複合式動畫效果" class="headerlink" title="鏈式複合式動畫效果"></a>鏈式複合式動畫效果</h5><p>連續動畫的效果很吸睛，只需要在slideUp後再新增幾組效果slideDown及slideUp，便可呈現開啟關閉效果。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    $(<span class="string">'.start'</span>).click(<span class="keyword">function</span>(event)&#123;</span><br><span class="line">        $(<span class="string">'.box'</span>).slideUp(1000).slideDown(1000).slideUp(1000);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h5 id="延遲出現動畫效果"><a href="#延遲出現動畫效果" class="headerlink" title="延遲出現動畫效果"></a>延遲出現動畫效果</h5><p>指定區塊後方新增.delay（毫秒）.fadeIn效果</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    $(<span class="string">'.open'</span>).click(<span class="keyword">function</span>(event)&#123;</span><br><span class="line">        $(<span class="string">'.box1'</span>).delay(0).fadeIn();</span><br><span class="line">        $(<span class="string">'.box2'</span>).delay(1000).slideDown();</span><br><span class="line">        $(<span class="string">'.box3'</span>).delay(2000).show(0);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="晃動效果"><a href="#晃動效果" class="headerlink" title="晃動效果"></a>晃動效果</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(<span class="function"><span class="title">function</span></span>()&#123;</span><br><span class="line">    $(<span class="string">'.open'</span>).click(<span class="keyword">function</span>(event)&#123;</span><br><span class="line">        $(<span class="string">'.box'</span>).addclass(<span class="string">'shake'</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>另外也『 大推 』 <a href="https://animate.style/" target="_blank" rel="noopener">CSS animate</a>動畫工具，請參考 <a href="https://www.oxxostudio.tw/articles/201803/css-animation.html" target="_blank" rel="noopener">詳細使用說明</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/jQuery/" rel="tag">jQuery</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0308"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/03/08/0308/">Vue_取得不重複陣列(實作)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/03/08/0308/" class="article-date">
	  <time datetime="2020-03-07T16:00:00.000Z" itemprop="datePublished">三月 8, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="執行用途"><a href="#執行用途" class="headerlink" title="執行用途"></a>執行用途</h3><p>希望在rawData裡，取出不重複的屬性名稱，為了將縣市名稱傳到選擇欄裡，供使用者選擇想知道的縣市資料，我們可使用<a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Set/add" target="_blank" rel="noopener">Set.prototype.add()</a>取出不重複的屬性名。</p>
<h5 id="範例1：取出不重複值"><a href="#範例1：取出不重複值" class="headerlink" title="範例1：取出不重複值"></a>範例1：取出不重複值</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var array = [1, 2, 2, 3, 3, 3];</span><br><span class="line">var result = Array.from(new Set(array));</span><br><span class="line">console.log(result); // [1, 2, 3]</span><br></pre></td></tr></table></figure>

<h5 id="範例2：取出不重複屬性名"><a href="#範例2：取出不重複屬性名" class="headerlink" title="範例2：取出不重複屬性名"></a>範例2：取出不重複屬性名</h5><p>注意：如果是以陣列包物件的形式進行new Set，回傳的雖然也是陣列的形式，不過裡頭會是字串的形式呈現，而非是陣列包物件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var array = [&#123;碗&#123;....&#125;&#125;, &#123;盤&#123;....&#125;&#125; ,&#123;碗&#123;....&#125;&#125;];</span><br><span class="line">var result = Array.from(new Set(array));</span><br><span class="line">console.log(result); // [<span class="string">'碗'</span>, <span class="string">'盤'</span>] 字串的形式</span><br></pre></td></tr></table></figure>

<hr>

<h3 id="實作解析"><a href="#實作解析" class="headerlink" title="實作解析"></a>實作解析</h3><p>目標是透過API取得的未整理資料，因為要在select上顯示各個區域的縣市，將經由new Set公式取得不重複的縣市，順利顯示在選單上，供使用者選取特定縣市。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">    data: [],</span><br><span class="line">    locations: [],</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">getUniqueList</span></span>() &#123;</span><br><span class="line">      const newlocations = new Set(); </span><br><span class="line">      this.data.forEach((item, i) =&gt; &#123; </span><br><span class="line">        newlocations.add(item.Region)</span><br><span class="line">      &#125;)</span><br><span class="line">      this.locations = Array.from(newlocations);</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>程式碼使用new Set( 含add())、forEach、array.from 多語法處理，需反覆理解。</p>
<ol>
<li>新增變數newlocations並帶入new Set()語法</li>
<li>此時想取用data的區域資料，利用forEach執行全部的區域，並將取得資料add放入變數裡</li>
<li>此時將newlocation利用Array.from轉成陣列格式匯入到變數locations裡</li>
<li>變數location便取得區域名稱的唯一值</li>
</ol>
<h4 id="實作成品"><a href="#實作成品" class="headerlink" title="實作成品"></a>實作成品</h4><p>作品: <a href="https://vince-chen-hao.github.io/Vue_MaskMap/">口罩搜尋地圖</a></p>
<p><img src="/images/selectarea.png" alt=""></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Vue/" rel="tag">Vue</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0305"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/03/05/0305/">JavaScript- 陣列處理方式</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/03/05/0305/" class="article-date">
	  <time datetime="2020-03-04T16:00:00.000Z" itemprop="datePublished">三月 5, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>陣列使用的技巧是辨別 JavaScript 功力相當重要的一塊，只要能夠對於陣列資料操作熟悉，配合框架就能夠將開發效率更上層樓。</p>
<ul>
<li>forEach：單純執行每個陣列內的物件或值。</li>
<li>map：執行每個元素，回傳的值會替代原本陣列內的值。</li>
<li>filter：執行每個元素，回傳 true 時，目前的值會保留在陣列內，這會回傳一個新陣列，而不是修改原本的陣列。</li>
<li>reduce：執行每個元素，依序組合、加總，然後丟給下個元素，最終會回傳一個結果。</li>
</ul>
<h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h4><p>forEach：遍歷每個元素，函式執行每個陣列內的物件或值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">陣列名.forEach(<span class="keyword">function</span>(數值item ,索引index , 原陣列array)&#123;</span><br><span class="line">    執行內容</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this.todos.forEach(<span class="keyword">function</span>(item)&#123; </span><br><span class="line">  <span class="keyword">if</span>（item&gt;2）&#123;</span><br><span class="line">    console.log(item)</span><br><span class="line">  &#125;&#125;</span><br><span class="line">//在this.todos陣列裡，使用item的資料做迴圈判斷</span><br></pre></td></tr></table></figure>

<p>在陣列內新增cash項目，並套用原momey數值+500</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">people.forEach(<span class="keyword">function</span>(item,index,array)&#123;</span><br><span class="line">item.cash = item.money + 500</span><br><span class="line">console.log(item)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h4><p>map與foreach的差異是map會有return指向新的陣列裡，但不影響原陣列的數值，很適合將原始的變數運算後重新組合一個新的陣列。</p>
<p>需產生新的陣列newpeople，放入函數內所新增的變數，*return代表會回傳一個值（滿足條件）到新陣列裡。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const newpeople =people.map(funtion(item,index,array)&#123;</span><br><span class="line">  <span class="built_in">return</span>&#123;</span><br><span class="line">    ...item, //…item表示為陣列裡的所有值，逗號後是結合後方的新變數</span><br><span class="line"></span><br><span class="line">    icash:item.money+500</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h4><p>按照字面上的意思來說就是過濾器，filter 不會修改值，但他會幫你決定要不要將這個值留在陣列裡面，要注意的是 filter 會回傳一個新的陣列，而不是修改原本的陣列。</p>
<p>相較於map不同的是filter會從原陣列裡篩選原有的數值至新陣列上，而非新增新的變數</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var arr    = [1, 2, 3, 4],  </span><br><span class="line">    newArr = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(var i = 0; i &lt; arr.length; i++) &#123;  </span><br><span class="line">    <span class="keyword">if</span>(arr[i] &gt; 2) &#123;</span><br><span class="line">        newArr.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(newArr); // [3, 4]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, 2, 3, 4];</span><br><span class="line"></span><br><span class="line">var newArr = arr.filter((val) =&gt; &#123;  </span><br><span class="line">    <span class="built_in">return</span> val &gt; 2;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(newArr); // [3, 4]</span><br></pre></td></tr></table></figure>

<h4 id="every"><a href="#every" class="headerlink" title="every()"></a>every()</h4><p>every() 可以檢查所有的陣列是否符合條件，這僅會回傳一個值 true or false，可以用來檢查陣列中的內容是否符合特定條件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var ans = array.every(<span class="keyword">function</span>(item, index, array)&#123;</span><br><span class="line">  console.log(item, index, array); // 物件, 索引, 全部陣列</span><br><span class="line">  <span class="built_in">return</span> item.age &gt; 10 // 當全部 age 大於 10 才能回傳 <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line">console.log(ans); // <span class="literal">false</span>: 只要有部分不符合，則為 <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h4 id="some"><a href="#some" class="headerlink" title="some()"></a>some()</h4><p>some() 與 every() 非常接近，都是回傳 true or false，差異僅在 every() 需完全符合，some() 僅需要部分符合。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ar ans2 = people.some(<span class="keyword">function</span>(item, index, array)&#123;</span><br><span class="line">  <span class="built_in">return</span> item.age &lt; 25</span><br><span class="line">&#125;);</span><br><span class="line">console.log(ans2); // <span class="literal">true</span>: 只要有部分符合，則為 <span class="literal">true</span>  </span><br><span class="line"></span><br><span class="line">var ans2 = people.some(<span class="keyword">function</span>(item, index, array)&#123;</span><br><span class="line">  <span class="built_in">return</span> item.age &gt; 25</span><br><span class="line">&#125;);</span><br><span class="line">console.log(ans2); // <span class="literal">false</span>: 全部都不符合則為 <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>參考資料: <a href="https://wcc723.github.io/javascript/2017/06/29/es6-native-array/" target="_blank" rel="noopener">陣列處理方法</a>、<a href="https://www.ucamc.com/e-learning/javascript/261-javascript-reduce%E3%80%81foreach%E3%80%81filter%E3%80%81map" target="_blank" rel="noopener">Javascript迴圈函式</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0303"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/03/03/0303/">Vue_Vuex狀態管理</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/03/03/0303/" class="article-date">
	  <time datetime="2020-03-02T16:00:00.000Z" itemprop="datePublished">三月 3, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="Vue的組件溝通方式"><a href="#Vue的組件溝通方式" class="headerlink" title="Vue的組件溝通方式"></a>Vue的組件溝通方式</h4><p>在單純的情況之下，兩個上、下層Vue組件若要進行溝通，會使用：</p>
<h5 id="1-props"><a href="#1-props" class="headerlink" title="1. props"></a>1. props</h5><p>由上傳下：上層使用 v-bind ，下層用props接到v-bind傳來的屬性資料<br>由下傳上：下層發出$emit事件，上層則用v-on偵聽該事件</p>
<h5 id="2-eventbus"><a href="#2-eventbus" class="headerlink" title="2. eventbus"></a>2. eventbus</h5><p>若專案更大一些，資料不太可能$emit一層一層慢慢傳上去，上層組件用v-on偵聽到事件並拿到資料之後，又再一層層用props慢慢傳到另一個下層組件，這樣很麻煩也很難維護，所以這種結構複雜的跨組件溝通會使用 eventbus 來傳遞資料。</p>
<h4 id="Vuex狀態管理"><a href="#Vuex狀態管理" class="headerlink" title="Vuex狀態管理"></a>Vuex狀態管理</h4><p>Vuex 大致上是透過一個 Global state 來儲存整個網站共有的狀態，而其設計概念是由「購買按鈕」組件 commit 一個 Mutation，而這個 Mutation 會改變 State，當 State 被改變時，則會觸發有使用到 State 的「購物車」組件的視覺元件被更新，而這整個觸法的過程是「單向運作」的。</p>
<p><img src="https://i.imgur.com/Xn2e3aq.png" alt=""></p>
<p>Vuex 跟 eventbus 最主要的差異在於，Vuex 的 Global state 是組件共用的狀態，而非單純儲存在某個組件內部中的狀態。所以本質上，組件與組件之間並沒有溝通，而是透過更新 Global State的狀態，而反應畫面到另外一個組件上。</p>
<p><img src="https://i.imgur.com/ubvsqZ6.png" alt=""></p>
<p><img src="https://i.imgur.com/VueGkLE.png" alt=""></p>
<h4 id="使用-Vuex-時機"><a href="#使用-Vuex-時機" class="headerlink" title="使用 Vuex 時機"></a>使用 Vuex 時機</h4><ul>
<li>組件之間很上互相溝通：不用Vuex</li>
<li>組件僅需上下傳遞就很夠用：不用Vuex</li>
<li>組件會互相溝通，但情境很固定，次數也很少：Event Bus</li>
<li>組件之間會跨結構傳遞狀態：Vuex</li>
<li>需要全域狀態管理：Vuex</li>
</ul>
<h4 id="vuex-的-Store-中有四大元素"><a href="#vuex-的-Store-中有四大元素" class="headerlink" title="vuex 的 Store 中有四大元素:"></a>vuex 的 Store 中有四大元素:</h4><ul>
<li>State</li>
<li>Mutations</li>
<li>Getters</li>
<li>Actions</li>
</ul>
<h4 id="解析彼此關係"><a href="#解析彼此關係" class="headerlink" title="解析彼此關係"></a>解析彼此關係</h4><p>Actions是指狀態的改變就像是Methods的函式，當State的變數需要做更動時，Actions是無法直接變更的，需經由代理商mutation當作兩者的媒介。</p>
<p>案例：我們可以看到State跟Actions裡的資料完全沒有一點瓜格，都是透過Mutations來連結彼此，逐一解釋三者關聯，</p>
<ul>
<li>在Mutations裡先命名LOADING為此橋樑的名稱，參數裡載入兩個位置(state預設, actions參數)，以此將兩者串連。</li>
<li>actions也要先命名函式名稱updateLoading，並增加兩個參數，前者是函式內使用的變數，第二則成為payload是傳入mutation裡的參數，內容我們先宣告變數名稱要串連mutations的橋樑名稱，以及順帶將payload參數也傳入即可完成</li>
<li>執行流程：html裡寫入vm.$store.dispatch(‘updateLoading’, true)，內容主要是呼叫action函式名，並且載入參數true，這時action函式就會進行動作，傳入mutations執行並改變state裡的值，也就是status參數。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    isLoading: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  //操作行為</span><br><span class="line">  actions:&#123;</span><br><span class="line">    updateLoading(context, status) &#123;</span><br><span class="line">        context.commit(<span class="string">'LOADING'</span>, status);</span><br><span class="line">      &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  //操作狀態</span><br><span class="line">  mutations:&#123;</span><br><span class="line">    LOADING(state, status) &#123; //第二個參數是外部傳入</span><br><span class="line">        state.isLoading = status;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>主頁面使用dispatch將需求傳至action裡，並帶指定參數</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.<span class="variable">$store</span>.dispatch(<span class="string">'updateLoading'</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p>如果有要回傳變數，則新增computed裡當作state的接口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="function"><span class="title">cart</span></span>() &#123;</span><br><span class="line">      <span class="built_in">return</span> this.<span class="variable">$store</span>.state.cart;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>



<h4 id="存放狀態的-State"><a href="#存放狀態的-State" class="headerlink" title="存放狀態的 State"></a>存放狀態的 State</h4><p>state 是 Vuex.Store 中儲存狀態的物件，裡面就可以存放許多自定義的屬性資料</p>
<p>日後會用到的資料，通常都會事先定義好屬性在 Store 中，即使是空字串、空陣列也沒關係，如果沒有事先定義好，之後就必須要用Vue.set的語法才能在 Store 中新增屬性資料。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">    state:&#123;</span><br><span class="line">        count:0,</span><br><span class="line">        userName:<span class="string">""</span>,</span><br><span class="line">        list:[]</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations:&#123;</span><br><span class="line">        addCount(state)&#123;</span><br><span class="line">            state.count += 1;</span><br><span class="line">        &#125;,</span><br><span class="line">        setLoading(state)&#123;</span><br><span class="line">            //Store 中還沒有  loading 屬性，所以要用 Vue.set 去新增</span><br><span class="line">            Vue.set(state,<span class="string">'loading'</span>,<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="變更狀態的-Mutations"><a href="#變更狀態的-Mutations" class="headerlink" title="變更狀態的 Mutations"></a>變更狀態的 Mutations</h4><p>要改變 Store 中的屬性，唯一的方法是透過 Mutation，它的實作方法是在 callBack 函式中，把 state 作為參數傳進去，並在其中重新 assign 值給 state 的屬性。而 mutations 中的操作只能是「同步」操作，不能是非同步操作，如果要非同步操作只能在 actions 中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">    state:&#123;</span><br><span class="line">        count:0,</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations:&#123;</span><br><span class="line">        addCount(state)&#123;</span><br><span class="line">            state.count += 1;</span><br><span class="line">            </span><br><span class="line">            //不得使用非同步操作，如：fetch</span><br><span class="line">            // fetch(url).<span class="keyword">then</span>(()=&gt;&#123;</span><br><span class="line">            //     state.count +=1;</span><br><span class="line">            // &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="取得狀態的-Getters"><a href="#取得狀態的-Getters" class="headerlink" title="取得狀態的 Getters"></a>取得狀態的 Getters</h4><p>Getter 其實就是 Store 中的 computed</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">    state:&#123;</span><br><span class="line">        todos:[],</span><br><span class="line">    &#125;,</span><br><span class="line">    getters:&#123;</span><br><span class="line">        itemsNotDone(state)&#123;</span><br><span class="line">            <span class="built_in">return</span> state.todos.filter(item=&gt; !item.done).length;</span><br><span class="line">        &#125;,</span><br><span class="line">        //將 getters 拿進 getter 中用</span><br><span class="line">        itemsDone(state,getters)&#123;</span><br><span class="line">            <span class="built_in">return</span> state.todos.length - getters.itemsNotDone;</span><br><span class="line">        &#125;,</span><br><span class="line">        //getter 也可以回傳出一個函式</span><br><span class="line">        itemWithID(state)&#123;</span><br><span class="line">            <span class="built_in">return</span> ((id)=&gt;&#123;</span><br><span class="line">                <span class="built_in">return</span> state.todos.filter(item=&gt;item.id===id);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在組件中要引用 getters 的做法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">//&lt;script&gt;</span><br><span class="line">import &#123;mapStates, mapGetters&#125; from <span class="string">'vuex'</span>;</span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">    computed:&#123;</span><br><span class="line">        ...mapStates([<span class="string">'todos'</span>]),</span><br><span class="line">        ...mapGetters([<span class="string">'itemNotDone'</span>,<span class="string">'itemWithID'</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        <span class="function"><span class="title">test</span></span>()&#123;</span><br><span class="line">            this.itemWithID(<span class="string">'123'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>發出指令的 Actions</p>
<p>前面提過，Mutations 裡面的操作只能是同步的，但若要透過「非同步」 的方式改變 State 裡的資料，就必須使用 Actions 來做操作。可是 Action</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">    state:&#123;</span><br><span class="line">        todos:[],</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations:&#123;</span><br><span class="line">        setTodos(state,todos)&#123;</span><br><span class="line">            state.todos = todos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    actions:&#123;</span><br><span class="line">        fetchTodos(context,payload)&#123;</span><br><span class="line">            fetch(url).</span><br><span class="line">            <span class="keyword">then</span>(rs =&gt; rs.json()).</span><br><span class="line">            <span class="keyword">then</span>(todos=&gt;&#123;</span><br><span class="line">                context.commit(<span class="string">'setTodos'</span>,todos);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">        //context 是一個包含 store 中一切的東西，</span><br><span class="line">        //可是 context 比 store 還多了一些東西，</span><br><span class="line">        //所以 context 不等同於 store。</span><br><span class="line">        //因為我們只需要用到 context 中的 commit</span><br><span class="line">        //所以這裡經常會使用到重新解構的語法：</span><br><span class="line">        fetchTodos(&#123;commit&#125;,payload)&#123;</span><br><span class="line">            ...</span><br><span class="line">            .<span class="keyword">then</span>(todos=&gt;&#123;</span><br><span class="line">                commit(<span class="string">'setTodos'</span>,todos);</span><br><span class="line">            &#125;)</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在組件中要引用 actions 的做法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//&lt;/script&gt;</span><br><span class="line">import &#123; mapActions&#125; from Vuex;</span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">    <span class="function"><span class="title">mounted</span></span>()&#123;</span><br><span class="line">        this.<span class="variable">$store</span>.dispatch(<span class="string">'fetchTodos'</span>,&#123;id:2&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    //或是將傳入 dispatch 的參數包成一個物件的寫法</span><br><span class="line">    <span class="function"><span class="title">mounted</span></span>()&#123;</span><br><span class="line">        this.<span class="variable">$store</span>.dispatch(&#123;</span><br><span class="line">            <span class="built_in">type</span>:<span class="string">'fetchTodos'</span>,//<span class="built_in">type</span> 是固定的 key</span><br><span class="line">            id:2,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        ...mapActions([<span class="string">'fetchTodos'</span>])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="mapAction語法"><a href="#mapAction語法" class="headerlink" title="mapAction語法"></a>mapAction語法</h4><p>注意：如果是要帶參數就不可以使用此語法</p>
<p>使用mapAction語法，需在script下新增</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; mapGetters, mapActions &#125; from <span class="string">'vuex'</span>;</span><br></pre></td></tr></table></figure>

<p>並在method裡的呼叫語法裡刪除既有的dispatch語法直接改成mapAction支援的格式<br>…mapActions([‘getProducts’]),</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Vue/" rel="tag">Vue</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0227"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/27/0227/">ES6_字串模板</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/27/0227/" class="article-date">
	  <time datetime="2020-02-26T16:00:00.000Z" itemprop="datePublished">二月 27, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="更新字串模板"><a href="#更新字串模板" class="headerlink" title="更新字串模板"></a>更新字串模板</h4><p>過去我們撰寫字串的時候都是使用”型態，這種寫法會讓程式碼變得很攏長且難以閱讀，再多行的時候也必須插入反斜線來換行。ES6 借鏡了許多開發工具，可以使用 反引號 來插入一段字串，並且可以使用 ${} 來加入變數或函式，省去一堆 +來做串接。</p>
<p>原生寫法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const msg = <span class="string">"I am "</span>+ age +<span class="string">" years old"</span>;</span><br></pre></td></tr></table></figure>
<p>ES6寫法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const msg = `</span><br><span class="line">    I am <span class="variable">$&#123;age *2&#125;</span> years old.</span><br><span class="line">    I have <span class="variable">$&#123;brother&#125;</span> brothers and <span class="variable">$&#123;sister&#125;</span> sisters.</span><br><span class="line">`;</span><br></pre></td></tr></table></figure>



<h4 id="解構陣列"><a href="#解構陣列" class="headerlink" title="解構陣列"></a>解構陣列</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 原始寫法</span><br><span class="line">const point = [1,2,3];</span><br><span class="line">const x = point[0];</span><br><span class="line">const y = point[1];</span><br><span class="line">const z = point[2];</span><br><span class="line"></span><br><span class="line">// ES6作法</span><br><span class="line">const point = [1,2,3]</span><br><span class="line">const [x,y,z] = point;</span><br><span class="line"></span><br><span class="line">//只取第一個</span><br><span class="line">const [x] = point;</span><br><span class="line"></span><br><span class="line">//只取第二個，用「，」捨去前面的</span><br><span class="line">const[,y] = point</span><br><span class="line"></span><br><span class="line">//取第一個跟其他的，用「...」代表</span><br><span class="line">const[x,...others] = point;//others 代表一個陣列[2,3]</span><br><span class="line"></span><br><span class="line">//給予預設值，當長度不夠時，會自動補植</span><br><span class="line">const[x,y,z,w = 0] = point;</span><br></pre></td></tr></table></figure>

<h4 id="解構物件"><a href="#解構物件" class="headerlink" title="解構物件"></a>解構物件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//原始寫法</span><br><span class="line">const point =&#123; x:1, y:2, z:3 &#125;;</span><br><span class="line">const x = point.x;</span><br><span class="line">const y = point.y;</span><br><span class="line">const z = point.z;</span><br><span class="line"></span><br><span class="line">//ES6寫法</span><br><span class="line">const &#123; x, y, z&#125; = point;</span><br><span class="line"></span><br><span class="line">//只取一個值</span><br><span class="line">const &#123; x &#125; = point;</span><br><span class="line"></span><br><span class="line">//只取x跟其他的</span><br><span class="line">const &#123; x, ...others&#125; = point//other代表&#123;y:2, z:3&#125;</span><br><span class="line"></span><br><span class="line">//給予預設值，如果原本point裡面沒有值，就會給它預設值</span><br><span class="line">const &#123; x=0, w=0 &#125; = point;//x還是1, w是0</span><br><span class="line"></span><br><span class="line">//重新命名</span><br><span class="line">const &#123; x:px=0 &#125; = point;//px是1，可是x會是undefined</span><br></pre></td></tr></table></figure>

<h4 id="物件用於函式"><a href="#物件用於函式" class="headerlink" title="物件用於函式"></a>物件用於函式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 原始寫法</span><br><span class="line">const point =&#123; x:1, y:2, z:3 &#125;;</span><br><span class="line">const draw = point=&gt;&#123;</span><br><span class="line">    console.log(point);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//解構寫法</span><br><span class="line">const draw = (&#123;x,y,z&#125;)=&gt;&#123;</span><br><span class="line">    draw(point);//印出1 2 3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/ES6/" rel="tag">ES6</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-0222"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2020/02/22/0222/">Vue_Eventbus元件橋樑</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2020/02/22/0222/" class="article-date">
	  <time datetime="2020-02-21T16:00:00.000Z" itemprop="datePublished">二月 22, 2020</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="使用時機"><a href="#使用時機" class="headerlink" title="使用時機"></a>使用時機</h4><p>在 Vue 框架的核心概念中，會盡可能將資料數據與 UI 封裝成可重複使用的組件，然而，當涉及組件與組件之間的資料交互傳輸時，就需要用到組件溝通的工具。</p>
<p>一般常用的父、子層組件溝通，會使用 props 、 $emit 來傳收資料；可是多個組件需要共用一種狀態時，就會需要使用到全域狀態管理的 Vuex。可是有時候情況只是兄、弟層組件溝通，沒有那麼複雜需要用到 Vuex ，就可以使用 EventBus。</p>
<h4 id="元件如何掛載？又如何彼此溝通"><a href="#元件如何掛載？又如何彼此溝通" class="headerlink" title="元件如何掛載？又如何彼此溝通?"></a>元件如何掛載？又如何彼此溝通?</h4><p>元件用法又分為兩種，一種只是圖型呈現，就只需要搭載至主頁面中就可以，另一種是需要呼叫主頁面裡的變數、函式，就需要用到emit及props呼叫，bus也是同一類型。</p>
<ol>
<li>第一種元件：單純呈現template</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Navbar/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Navbar from <span class="string">'./Navbar'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">    components:&#123; </span><br><span class="line">        Navbar,</span><br><span class="line">    &#125;&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>第二種元件：需使用主頁面的變數及函式</li>
</ol>
<p>變數使用props，函式使用emit，除了跟上圖一樣啟用載入元件路徑之外，還需要在載入對應的變數及函數(如下圖)，例如：頁籤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Pagination :A=<span class="string">"pagination"</span> @B=<span class="string">"getProducts"</span> &gt;&lt;/Pagination&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>第三種元件：當觸發事件後，在元件內會進行函式運算</li>
</ol>
<p>無須啟用圖一的載入元件路徑，只需在接口處註冊新增bus.on(自定義名稱A)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">created</span></span>() &#123;</span><br><span class="line">     this.getCart();</span><br><span class="line">     const vm = this;</span><br><span class="line">     </span><br><span class="line">     vm.<span class="variable">$bus</span>.<span class="variable">$on</span>(<span class="string">'updateCart'</span>,()=&gt;&#123;</span><br><span class="line">       vm.getCart();</span><br><span class="line">     &#125;);</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>

<p>並再主頁面點擊某種物件時，同時觸發元件A內容，使用bus.emit當作接口回傳至元件內部執行函式裡的內容即可，例如：彈跳提示視窗、包含動態式購物車也要(另需template增加&lt;&gt;項目)。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.<span class="variable">$http</span>.post(api, cart).<span class="keyword">then</span>((res) =&gt; &#123;</span><br><span class="line">    vm.<span class="variable">$bus</span>.<span class="variable">$emit</span>(<span class="string">'updateCart'</span>);</span><br><span class="line">    this.<span class="variable">$bus</span>.<span class="variable">$emit</span>(<span class="string">'message:push'</span>,res.data.message,<span class="string">'success'</span>)</span><br></pre></td></tr></table></figure>


<h4 id="EventBus簡介"><a href="#EventBus簡介" class="headerlink" title="EventBus簡介"></a>EventBus簡介</h4><p>在 Vue 中使用 EventBus，就像是所有組件共同的事件中心，組件與組件之間可以上下垂直、左右平行互相溝通。</p>
<p>具體做法是在專案入口檔案，建立一個 Vue 實例(Instance) 作為 EventBus，接著在各個組件之中去引入這個 EventBus，透過分別調用 EventBus 的事件監聽來完成組件之間的資料傳遞。</p>
<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>首先要創建一個 EventBus，有兩種方式：</p>
<p>第一種，直接在 main.js 檔案中初始化，目的是要在 Vue 的原型下掛載 EventBus。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//main.js</span><br><span class="line">Vue.prototype.<span class="variable">$EventBus</span> = new Vue();</span><br></pre></td></tr></table></figure>
<p>第二種，新增一個 eventBus.js 檔案，在其中引入 Vue，並且匯出宣告出來的 Vue 實例。實際上，它是一個不具有 DOM 元素的組件，它僅有 Vue 實例的方法，因此非常輕便。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// eventBus.js</span><br><span class="line"></span><br><span class="line">import Vue from <span class="string">"vue"</span>;</span><br><span class="line"><span class="built_in">export</span> const EventBus = new Vue();</span><br></pre></td></tr></table></figure>


<h4 id="掛載-EventBus"><a href="#掛載-EventBus" class="headerlink" title="掛載 EventBus"></a>掛載 EventBus</h4><p>全域掛載：將 eventBus 加入 root實例中的 data 中，讓每個子組件都能夠使用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//main.js</span><br><span class="line">import Vue from <span class="string">"vue"</span>;</span><br><span class="line">import eventBus from <span class="string">"./eventBus.js"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default new Vue(&#123;</span><br><span class="line">  store, //use store</span><br><span class="line">  i18n,</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    EventBus:eventBus,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">  render: (h) =&gt; h(app),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="發送事件"><a href="#發送事件" class="headerlink" title="發送事件"></a>發送事件</h4><p>全域 EventBuse：如果是全域掛載的 EventBus 可以在任意組件中，利用 EventBus取得EventBus，再呼叫emit 送出事件並傳遞資料。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//xxx.vue</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ...略</span><br><span class="line">    methods:&#123;</span><br><span class="line">        <span class="function"><span class="title">testFunc</span></span>()&#123;</span><br><span class="line">            this.<span class="variable">$EventBus</span>.<span class="variable">$emit</span>(<span class="string">"testEvent"</span>,&#123;</span><br><span class="line">                title:<span class="string">"Test Event Title"</span>,</span><br><span class="line">                message:<span class="string">"This is test event."</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">// ...略</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="接收事件"><a href="#接收事件" class="headerlink" title="接收事件"></a>接收事件</h4><p>全域 EventBuse：可以在任一組件中利用 $on 去監聽，只要監聽事件被觸發，都可以接收到訊息。如果想移除事件的監聽，則使用 $off 不需要添加其他任何參數。記得在組件銷毀之前(beforeDestroy)，清除監聽事件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//xxx.vue</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ...略</span><br><span class="line"><span class="built_in">export</span> default&#123;</span><br><span class="line">    name:<span class="string">"xxx"</span>,</span><br><span class="line">    <span class="function"><span class="title">created</span></span>()&#123;</span><br><span class="line">        this.<span class="variable">$EventBus</span>.<span class="variable">$on</span>(<span class="string">"testFunc"</span>,event=&gt;&#123;</span><br><span class="line">            console.log(<span class="string">"Title:"</span>+event.title);</span><br><span class="line">            console.log(<span class="string">"Msg:"</span>+event.message);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">beforeDestroy</span></span>()&#123;</span><br><span class="line">        this.<span class="variable">$EventBus</span>.<span class="variable">$off</span>(<span class="string">"testFunc"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// ...略</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="統整"><a href="#統整" class="headerlink" title="統整"></a>統整</h4><p>EventBus 身為一個全域的實例，所有的組件都透過$emit 方法向 EventBus 傳送、更新資料;而其他所有的組件，也同步使用監聽事件 $on 偵測它有沒有發生變化，一但資料數據發生變化，就會獲取 event 其中的資料數據。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/ES6/" rel="tag">ES6</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="page/2/">2</a><a class="page-number" href="page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="page/6/">6</a><a class="extend next" rel="next" href="page/2/">下一頁</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 72%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 36px; width: 100%;" placeholder=" 搜尋…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="搜尋">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="請輸入關鍵詞..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '頁面',
            CATEGORIES: '分類',
            TAGS: '標籤',
            UNTITLED: '(無標題)',
        },
        ROOT_URL: '/',
        CONTENT_URL: 'content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="js/insight.js"></script>


</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">聯系我們</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
   			<li><a href="https://github.com/iTimeTraveler" target="_blank" rel="noopener" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Weibo"><i class="fa fa-weibo" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Google-plus"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Instagram"><i class="fa fa-instagram" aria-hidden="true"></i></a></li> 

   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" target="_blank" rel="noopener" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" target="_blank" rel="noopener" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" target="_blank" rel="noopener" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" target="_blank" rel="noopener" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" target="_blank" rel="noopener" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" target="_blank" rel="noopener" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>最新文章</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/05/13/hello-world/">Hello World</a></h6>
              <span>五月 13, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/05/12/0513/">JS- scope chain</a></h6>
              <span>五月 12, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/03/15/0315/">Vue_過濾API資料(實作)</a></h6>
              <span>三月 15, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/03/13/0313/">Vue_ 口罩地圖(實作)</a></h6>
              <span>三月 13, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/03/10/0310/">jQuery_事件(Events)</a></h6>
              <span>三月 10, 2020</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="2020/03/08/0308/">Vue_取得不重複陣列(實作)</a></h6>
              <span>三月 8, 2020</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="tags/Bootstrap/" rel="tag">Bootstrap</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/ES6/" rel="tag">ES6</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/HTML/" rel="tag">HTML</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/JSON/" rel="tag">JSON</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/JavaScript/" rel="tag">JavaScript</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Slick/" rel="tag">Slick</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/VsCode/" rel="tag">VsCode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Vue/" rel="tag">Vue</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/Webpack/" rel="tag">Webpack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/jQuery/" rel="tag">jQuery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/%E5%89%8D%E7%AB%AF%E6%96%87/" rel="tag">前端文</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="tags/%E6%95%99%E5%AD%B8%E6%96%87/" rel="tag">教學文</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="tags/Bootstrap/" style="font-size: 16px;">Bootstrap</a> <a href="tags/CSS/" style="font-size: 16px;">CSS</a> <a href="tags/ES6/" style="font-size: 14px;">ES6</a> <a href="tags/Git/" style="font-size: 12px;">Git</a> <a href="tags/HTML/" style="font-size: 12px;">HTML</a> <a href="tags/JSON/" style="font-size: 10px;">JSON</a> <a href="tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="tags/Slick/" style="font-size: 10px;">Slick</a> <a href="tags/VsCode/" style="font-size: 10px;">VsCode</a> <a href="tags/Vue/" style="font-size: 18px;">Vue</a> <a href="tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="tags/%E5%89%8D%E7%AB%AF%E6%96%87/" style="font-size: 10px;">前端文</a> <a href="tags/%E6%95%99%E5%AD%B8%E6%96%87/" style="font-size: 10px;">教學文</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="archives/2020/05/">五月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2020/03/">三月 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2020/02/">二月 2020</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2020/01/">一月 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2019/12/">十二月 2019</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2019/11/">十一月 2019</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="archives/2019/10/">十月 2019</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="index.html" class="mobile-nav-link">Home</a>
  
    <a href="archives" class="mobile-nav-link">Archives</a>
  
    <a href="categories" class="mobile-nav-link">Categories</a>
  
    <a href="tags" class="mobile-nav-link">Tags</a>
  
    <a href="about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2020 Vince Blog All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    // 
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="fancybox/jquery.fancybox.css">

  
<script src="fancybox/jquery.fancybox.pack.js"></script>




<script src="js/script.js"></script>


<script src="js/bootstrap.js"></script>


<script src="js/main.js"></script>








  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
